Estos comandos han sido testeados y funcionan perfectamente (Sin embargo aún no se puede iniciar Windows Pe)

Este proceso hay que realizarlo después de haber hecho los comandos en termux

Iniciar TWRP recovery a través el PC con el comando 
fastboot boot <twrp.img>

No copiar las líneas con #

#####push parted script to sdcard######
adb push parted /sdcard/

####iniciar adb shell#####
adb shell

#####mover parted a directorio sbin###
cp /sdcard/parted /sbin/ && chmod 755 /sbin/parted

#desmontar data y sdcard
umount /data && umount /sdcard

#Iniciar parted
parted /dev/block/sda

#Eliminar particiones rm {número partición} #
rm 32

#####Crear particiones#########

#Crear particiones (modelos de 256Gb, Aún no está disponible para el de 128Gb)
mkpart esp fat32 11.8GB 12.2GB
mkpart win ntfs 12.2GB 92.2GB
mkpart userdata ext4 92.2GB 255GB


#set esp on
set 28 esp on

#Quit
quit

#reiniciar a recovery twrp

#formatea las nuevas particiones

mkfs.fat -F32 -s1 /dev/block/by-name/pe

mkfs.fat -F32 -s1 /dev/block/by-name/esp

mkfs.ntfs -f /dev/block/by-name/win

mke2fs -t ext4 /dev/block/by-name/userdata



Comprueba si inicia Android


###############Inicia con la imagen UEFI de arranque de Windows##############

fastboot flash boot (Uefi del dispositivo.img)


################ commandos en el teléfono(Desde Windows Pe)################
##### estos comandos no funcionan #####

diskpart

select disk 0

list part

select part 32

assign letter=Y

exit

bcdedit /store Y:\efi\microsoft\boot\bcd /set {Default} testsigning on

bcdedit /store Y:\efi\microsoft\boot\bcd /set {Default} nointegritychecks on

shutdown -s -t 0

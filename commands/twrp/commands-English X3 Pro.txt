These commands have been tested and work perfectly

This process must be done after having done the commands in termux

Start TWRP recovery through the PC with the command
fastboot boot <twrp.img>

Don't copy lines with #

#####push partitioned script to sdcard######
adb push parted /sdcard/

####start adb shell#####
adb shell

#####move parted to sbin directory###
cp /sdcard/parted /sbin/ && chmod 755 /sbin/parted

#unmount data and sdcard
umount /data && umount /sdcard

#Start parted
Parted /dev/block/sda

#Delete partitions rm {partition number} #
rm 32

#####Create partitions#########

#Create partitions (256Gb models, Not yet available for 128Gb)
mkpart esp fat32 11.8GB 12.2GB
mkpart win ntfs 12.2GB 92.2GB
mkpart userdata ext4 92.2GB 255GB


#set esp on
set 28 esp on

#Quit
quit

#reboot to recovery twrp

#format the new partitions

mkfs.fat -F32 -s1 /dev/block/by-name/esp

mkfs.ntfs -f /dev/block/by-name/win

#format from twrp

#Check if Android starts

##with these commands your pc will be able to detect the mobile as a disk to carry out the installation (Have MTP disabled in Mount)

#Move msc.sh to internal memory
adb push msc.sh /sdcard

#start shell
adb shell

# indicate that we want to use the root
cd/sd card

#These two commands start the program
chmod +x msc.sh

./msc.sh

###Once the X3 pro is detected as a disk###

# we open a cmd

#This will start the Windows Disk Management tool
diskpart

#Select the disk that is your x3 pro
sel disk 1 (or whatever your poco x3 pro is)

# Select the volume where we are going to install Windows
sel vol 3

# We assign the letter x to the volume where we are going to install Windows
assign letter=x

# Select the volume where we will install the drivers
sel vol 4

# We assign the letter and the volume where we will install the drivers
assign letter=y

#Install Windows 11 on the X3 Pro (replace "Usuario" with your username and "WindowsarmFolder" with your folder that contains windows arm, but no spaces)

dism /apply-image /ImageFile:"C:\Users\Usuario\Downloads\WindowsarmFolder\sources\install.wim" /index:1 /ApplyDir:X:\

#Install drivers (replace mipad5folder with the location of the drivers folder)(open in powershell as administrator)
.\driverupdater.exe -d (mipad5 folder)\definitions\Desktop\ARM64\Internal\vayu.txt -r (mipad5 folder) -p X:

# Now unsigned drivers must be allowed
bcdboot X:\Windows /s Y: /f UEFI

bcdedit /store Y:\EFI\Microsoft\BOOT\BCD /set {default} testsigning on

bcdedit /store Y:\EFI\Microsoft\BOOT\BCD /set {bootmgr} displaybootmenu yes

###############Boots with Windows bootable UEFI image##############

fastboot flash boot (device uefi.img)

